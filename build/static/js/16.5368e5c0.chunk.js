(window["webpackJsonpie-project"]=window["webpackJsonpie-project"]||[]).push([[16],{540:function(e,a,t){"use strict";t.r(a);t(150);var n=t(27),i=(t(215),t(151)),s=(t(221),t(157)),l=(t(85),t(32)),r=(t(219),t(156)),o=(t(152),t(11)),c=(t(218),t(79)),m=(t(216),t(118)),p=(t(153),t(86)),u=t(45),d=t(46),h=t(49),f=t(47),g=t(48),b=(t(443),t(438)),E=(t(417),t(412)),y=t(0),v=t.n(y),D=t(155),w=t(55),Y=t(116),j=t.n(Y),x=E.a.Option,O=b.a.MonthPicker,V=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(h.a)(this,Object(f.a)(a).call(this))).getItemData=function(){e.setState({isLoading:!0}),Object(D.d)(e.props.match.params.id).then(function(a){a.data&&e.props.form.setFieldsValue({email:a.data.email,name:a.data.name,relationship:a.data.relationship,lastVaccineDate:j()(a.data.lastVaccineDate,"YYYY-MM-DD"),phoneNumber:a.data.phoneNumber})}).finally(function(){e.setState({isLoading:!1})})},e.handleSubmit=function(a){a.preventDefault(),e.props.form.validateFields(function(a,t){if(!a){var n=(new Date).getFullYear();t.lastVaccineDate.year()<n?t.nextVaccineDate=j()().format("YYYY-MM-DD"):t.nextVaccineDate="".concat(n+1,"-04-01");var i=t.lastVaccineDate.format("YYYY-MM-01");t.lastVaccineDate=i,e.setState({isUpdating:!0});var s={id:e.props.location.state.userid};t.userid=s,t.id=e.props.match.params.id;var l=JSON.stringify(t);Object(D.j)(l).then(function(a){a.data?(p.a.success("You have updated successfully!"),e.props.history.push({pathname:"/account"})):p.a.error("Failed to update!")}).finally(function(){e.setState({isUpdating:!1})})}})},e.validateToPhoneNumber=function(e,a,t){console.log("111"),/^04\d{8}$/.test(a)?(console.log("333"),t()):(console.log("222"),t("You should input legal phone number! Such as: 0413174686 "))},e.state={isLoading:!1,isUpdating:!1},e}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getItemData()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=e("prefix",{initialValue:"61"})(v.a.createElement(E.a,{style:{width:70}},v.a.createElement(x,{value:"61"},"+61")));return v.a.createElement("div",null,v.a.createElement(n.a,{lg:{span:12,offset:6},md:{span:22,offset:1},style:{marginTop:"24px",marginBottom:"24px"}},v.a.createElement(i.a,{style:{maxWidth:"500px",margin:"auto"}},v.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginBottom:"20px"}},"Update your grandparent information"),v.a.createElement(s.a,{spinning:this.state.isLoading},v.a.createElement(c.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),v.a.createElement(c.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(v.a.createElement(m.a,{disabled:this.state.isUpdating}))),v.a.createElement(c.a.Item,{label:"name"},e("name",{rules:[{required:!0,message:"Please input name!",whitespace:!0}]})(v.a.createElement(m.a,{disabled:this.state.isUpdating}))),v.a.createElement(c.a.Item,{label:v.a.createElement("span",null,"Relationship\xa0",v.a.createElement(r.a,{title:"What`s the relationship with he/she?"},v.a.createElement(o.a,{type:"question-circle-o"})))},e("relationship",{rules:[{required:!0,message:"Please input relationship!",whitespace:!0}]})(v.a.createElement(m.a,{disabled:this.state.isUpdating}))),v.a.createElement(c.a.Item,{label:v.a.createElement("span",null,"Vaccine record\xa0",v.a.createElement(r.a,{title:"When was the last tiem that the person took the flu shot?"},v.a.createElement(o.a,{type:"question-circle-o"})))},e("lastVaccineDate",{rules:[{type:"object",required:!0,message:"Please select time!"}]})(v.a.createElement(O,null))),v.a.createElement(c.a.Item,{label:"Phone Number"},e("phoneNumber",{rules:[{required:!0,message:"Please input your phone number!"},{validator:this.validateToPhoneNumber}]})(v.a.createElement(m.a,{addonBefore:a,placeholder:"eg.0431374686",style:{width:"100%"}}))),v.a.createElement(c.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},v.a.createElement(l.a,{type:"primary",htmlType:"submit",loading:this.state.isUpdating},"Update")))))))}}]),a}(y.Component);a.default=c.a.create({name:"editGrandparent"})(Object(w.g)(V))}}]);
//# sourceMappingURL=16.5368e5c0.chunk.js.map